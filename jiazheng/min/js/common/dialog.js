!function(a,b,c){if(!c.Dialog){var d=!!a.browser.msie,e=d&&"6.0"===a.browser.version,f=a(b.document),g=a("body"),h=a(b),i=16,j=c.Browser.isMac,k=!1;a(function(){g=a("body")});var l='<div class="g_dlg_box"></div>',m="dlg",n=ids=0,o=1e5,p={content:"",maskVisible:!0,top:0,left:0,width:0,height:0,newMask:!1,contentStyle:"",borderStyle:"",titleStyle:"",closeCls:"",closeBtn:{handler:function(a){a.close()}},hideCloseBtn:!1},q=function(a,b){var c,d={};for(c in b)b.hasOwnProperty(c)&&(d[c]="undefined"!=typeof a[c]?a[c]:b[c]);return d},r=function(){var a=h;return{scrollTop:f.scrollTop(),scrollLeft:f.scrollLeft(),width:a.width(),height:a.height()}},s="dlg_mask_",t=function(){this.id=s+ ++n,this._dom=a('<div id="'+this.id+'" class="dlg_mask" style="z-index:'+ ++o+'"></div>'),this._init()};t.prototype={_init:function(){g.append(this._dom),this._dom.hide(),this._initEvents(),this.adaptWin(),this._createIframe()},_initEvents:function(){},_createIframe:function(){this._iframe=a('<iframe class="dlg_miframe" frameborder="0" src="about:blank"></iframe>'),this._dom.append(this._iframe)},addClass:function(a){this._dom.addClass(a)},_needIframe:function(){var c=!!b.ActiveXObject&&(e&&a("select").length||a("object").length);return c},adaptWin:function(){e&&this._dom.css({top:f.scrollTop(),left:f.scrollLeft(),height:h.height(),width:h.width()})},hide:function(){this._dom.hide();var b=a("html").css("overflow","");0==j&&k&&b.css("padding-right","0px")},show:function(){var b=this,c=h.width(),d=a("html").css("overflow","hidden"),e=h.width();b._dom.show(),0==j&&c!=e&&(k=!0,d.css("padding-right",i+"px"))},getDom:function(){return this._dom},remove:function(){this._dom.remove()}};var u,v=function(a){var b=a||{};this.config=q(b,p),this._init()};v.prototype={constructor:v,_init:function(){if(this.config){this.id=m+ ++ids;var a=this.config;a.newMask?this._mask=new t:u?this._mask=u:(u=new t,this._mask=u),this._creatDialog(),this._initEvents(),this.inited=!0}},_initEvents:function(){function a(){e?b._dlg_container.css({top:f.scrollTop(),left:f.scrollLeft(),width:h.width(),height:h.height()}):b._dlg_container.css({width:h.width(),height:h.height()}),b.toCenter(),b._mask.adaptWin()}var b=this,c=this.id;this._closeBtn.bind({click:function(a){a.preventDefault(),b.config.closeBtn.handler.call(b,b)}}),h.bind("resize."+c,a),b._unbindEvents=function(){h.unbind("resize."+c)}},_creatDialog:function(){var b=this.config,c=this._dlg_container=a(l).attr("id",this.id).css("z-index",o+=10);this._dialog=b.content instanceof a?b.content:a(b.content);var d=this._dialog;d.addClass("g_dlg_wrap_css3"),c.html(d),this._content=a(".js_content",d),this._closeBtn=a(".js_close",d),g.append(c),b.hideCloseBtn&&this._closeBtn.hide();var i="fixed";e?(c.css({top:f.scrollTop(),left:f.scrollLeft(),width:h.width(),height:h.height()}),i="absoulte"):c.css({width:h.width(),height:h.height()}),d.css("position","absolute"),this.setPos(i)},setPos:function(a){this._dlg_container.css("position",a)},getContainer:function(){return this._dlg_container},getContent:function(){return this._content},setContent:function(a){this._content.empty(),this._content.html(a)},getCloseBtn:function(){return this._closeBtn},_setStyle:function(a,b){"string"==typeof b?d?a[0].style.cssText=b:a.attr("style",b):a.css(b)},toCenter:function(){var a=r(),b=this._dialog.width(),c=this._dialog.height(),d=0,f=0,g=Math.max(a.height/2-c/2>>0+d,0),h=a.width/2-b/2>>0+f;e&&(h-=i/2);var j={left:h,top:g};return this._dialog.css(j),this},show:function(a,b){var c=this;return c.config.maskVisible&&c._mask.show(),c._dlg_container.css({width:h.width(),height:h.height()}),c._dlg_container.show(),c.toCenter(),a&&a.call(b||c,c),c.showed=!0,this},close:function(a,b){var c=this;return this._mask.hide(),this._dlg_container.hide(),a&&a.call(b||c,c),this.showed=!1,this},destory:function(){this.close(),this._unbindEvents(),this.config.newMask&&this._mask.remove(),this._dlg_container.remove(),this._dialog.remove();for(var a in this)delete this[a]},getMask:function(){return this._mask}},v.prototype.In=v.prototype.show,v.prototype.out=v.prototype.close,v.prototype.hide=v.prototype.close,v.prototype.remove=v.prototype.destory,c.Dialog=v,c.popMsg=function(a){var b=new v({maskVisible:!1,newMask:!0,content:['<div class="pop_msg" style="position:relative;" ><table><tr><td>',a,'</td></tr></table><i class="js_close" style="position:absolute;width:16px;height:20px;right:5px;top:5px;"></i></div>'].join(""),closeBtn:{handler:function(a){c&&clearTimeout(c),a.remove()}}});b.show();var c=setTimeout(function(){b.remove()},1500)},"function"==typeof define&&define("js/common/dialog",[],function(a,b,c){c.exports=v})}}(jQuery,window,QNR);